<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.1.1 과학의 기초 - 과학의 기본량 (불당)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f4f8;
        }
        .quiz-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1.5rem;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .question-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            color: #2d3748;
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .question-text .blank-emphasis { 
            font-weight: bold;
            color: #3b82f6; 
        }
        .option-label {
            display: block;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
            background-color: #f7fafc;
        }
        .option-label:hover {
            background-color: #e2e8f0;
        }
        .option-input:checked + .option-label {
            background-color: #4299e1;
            color: white;
            border-color: #2b6cb0;
        }
        .feedback {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 6px;
            font-size: 0.95rem;
        }
        .feedback.correct {
            background-color: #c6f6d5;
            color: #2f855a;
            border: 1px solid #9ae6b4;
        }
        .feedback.incorrect {
            background-color: #fed7d7;
            color: #c53030;
            border: 1px solid #fbb6ce;
        }
        .explanation {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #4a5568;
            line-height: 1.5;
        }
        .action-button {
            background-color: #4a5568;
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
            margin-top: 1rem;
            margin-right: 0.5rem;
        }
        .action-button:hover:not(:disabled) {
            background-color: #2d3748;
        }
        .action-button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }
        .pagination-controls {
            display: flex; 
            justify-content: center;
            align-items: center;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .pagination-controls button, .pagination-controls span {
            margin: 0 0.25rem;
            padding: 0.5rem 0.75rem;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            background-color: #fff;
            cursor: pointer;
        }
        .pagination-controls button:disabled {
            background-color: #e2e8f0;
            cursor: not-allowed;
            opacity: 0.7;
        }
        .pagination-controls .page-number.current {
            background-color: #4299e1;
            color: white;
            border-color: #2b6cb0;
            font-weight: bold;
        }
        .score-section {
            margin-top: 1.5rem;
            padding: 1.5rem; 
            background-color: #e9f5ff;
            border-radius: 8px;
            text-align: left;
        }
        .score-text {
            font-size: 1.1rem;
            font-weight: 500;
            color: #1a202c;
            margin-bottom: 0.5rem;
        }
        .quiz-title-in-score {
            font-size: 1.1rem; 
            font-weight: bold;
            color: #1e40af; 
            margin-bottom: 0.75rem; 
        }
        .motivational-quote { 
            font-size: 1rem;
            font-style: italic;
            color: #374151; 
            margin-top: 1.5rem; 
            padding-top: 1rem;
            border-top: 1px dashed #cbd5e0; 
            text-align: center;
        }
        h1 { 
            font-size: 1.8rem;
            font-weight: 700;
            color: #1a202c;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .page-info {
            text-align: center;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #4a5568;
        }

        /* 팝업 스타일 */
        .popup-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); display: flex;
            justify-content: center; align-items: center; z-index: 1000; 
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .popup-overlay.show { opacity: 1; visibility: visible; }
        .popup-content {
            background-color: white; padding: 2.5rem; border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25); text-align: center;
            max-width: 420px; width: 90%;
        }
        .popup-content h2 {
            font-size: 1.75rem; font-weight: 700; color: #1a202c; margin-bottom: 1rem;
        }
        .popup-content p.welcome-message {
            font-size: 1rem; color: #4a5568; margin-bottom: 1.5rem; line-height: 1.6;
        }
        .popup-password-input {
            width: 100%; padding: 0.75rem; margin-bottom: 1rem;
            border: 1px solid #cbd5e0; border-radius: 6px; font-size: 1rem;
            box-sizing: border-box; 
        }
        .popup-confirm-btn {
            background-color: #3b82f6; color: white; padding: 0.75rem 1.5rem;
            border-radius: 8px; font-weight: 500; cursor: pointer;
            transition: background-color 0.2s; border: none; width: 100%;
            font-size: 1rem;
        }
        .popup-confirm-btn:hover { background-color: #2563eb; }
        .popup-error-message {
            color: #ef4444; font-size: 0.875rem; margin-top: 0.75rem;
            min-height: 1.25rem; 
        }
    </style>
</head>
<body>
    <div id="welcome-popup" class="popup-overlay">
        <div class="popup-content">
            <h2>Appia 과학학원</h2>
            <p class="welcome-message">유선종 선생님의 학습 자료입니다.<br>비밀번호를 입력해주세요.</p>
            <input type="password" id="popup-password" class="popup-password-input" placeholder="비밀번호">
            <button id="popup-confirm" class="popup-confirm-btn">확인</button>
            <p id="popup-error" class="popup-error-message"></p>
        </div>
    </div>
    <div class="quiz-container">
        <h1>1.1.1 과학의 기초 - 과학의 기본량 (불당)</h1>
        <div class="page-info" id="page-info"></div>
        <div id="quiz">
            <!-- Questions will be rendered here by JavaScript -->
        </div>
        <div class="pagination-controls" id="pagination-controls">
            <!-- Pagination buttons will be rendered here -->
        </div>
        <button id="submit-page-btn" class="action-button w-full sm:w-auto mx-auto block">이번 페이지 채점하기</button>
        <div class="score-section" id="score-section" style="display: none;">
            <p class="score-text quiz-title-in-score" id="quiz-main-title-in-score"></p> 
            <p class="score-text" id="current-page-score-text"></p>
            <p class="score-text" id="total-score-text"></p>
            <p class="motivational-quote" id="motivational-quote" style="display: none;"></p> 
        </div>
    </div>

    <script>
        // 문제 데이터
        const questions = [
            {
                id: 1, type: 'fill-in', text: "1. 자연 현상을 탐구할 때 측정 대상의 (   )를 고려해야 한다.",
                answer: "규모", options: ["속도", "규모", "색깔", "온도"],
                explanation: "자연 현상을 올바르게 탐구하기 위해서는 관찰하거나 측정하려는 대상의 크기나 범위, 즉 '규모'를 먼저 고려해야 합니다."
            },
            {
                id: 2, type: 'fill-in', text: "2. (   )에 따라 측정 방법이 다르다.",
                answer: "규모", options: ["시간", "장소", "규모", "목표"],
                explanation: "측정 대상의 규모(미시 세계, 거시 세계 등)에 따라 적절한 측정 도구와 방법이 달라집니다."
            },
            {
                id: 3, type: 'fill-in', text: "3. 적혈구는 (   )세계의 규모를 갖는 대상이다.",
                answer: "미시", options: ["거시", "일상", "미시", "우주"],
                explanation: "적혈구와 같이 맨눈으로 볼 수 없고 현미경 등을 사용해야 관찰 가능한 작은 세계를 '미시 세계'라고 합니다."
            },
            {
                id: 4, type: 'fill-in', text: "4. 동전은 (   )세계의 규모를 갖는 대상이다.",
                answer: "거시", options: ["미시", "거시", "초미시", "가상"],
                explanation: "동전처럼 우리가 일상생활에서 직접 경험하고 눈으로 볼 수 있는 규모의 세계를 '거시 세계'라고 합니다."
            },
            {
                id: 5, type: 'fill-in', text: "5. 자연 세계에서 (   )수준의 아주 작은 규모를 (   )세계라 한다.",
                answer: "원자;미시", options: ["분자;거시", "원자;미시", "세포;일상", "은하;우주"],
                explanation: "원자나 전자와 같이 물질을 구성하는 매우 작은 입자 수준의 규모를 '미시 세계'라고 합니다."
            },
            {
                id: 6, type: 'ox', text: "6. 규모에 따라 측정하는 방법은 다르다.",
                answer: "O", options: ["X", "O"],
                explanation: "맞습니다. 대상의 규모에 따라 현미경, 망원경, 자, 저울 등 다양한 측정 도구와 방법이 사용됩니다."
            },
            {
                id: 7, type: 'fill-in', text: "7. DVD 지름의 단위로 적절한 것은 (   )이다.",
                answer: "cm", options: ["m", "km", "cm", "μm"],
                explanation: "DVD의 지름은 보통 수 센티미터(cm)이므로, cm 단위로 표현하는 것이 적절합니다."
            },
            {
                id: 8, type: 'fill-in', text: "8. 적혈구 크기의 단위로 적절한 것은 (μm)이다.", 
                answer: "μm", options: ["nm", "mm", "cm", "μm"],
                explanation: "적혈구의 크기는 매우 작아 마이크로미터(μm, 10<sup>-6</sup>m) 단위를 사용합니다."
            },
            {
                id: 9, type: 'fill-in', text: "9. 과거의 시간을 측정한 방법은 (   )의 위치나 (   )의 모양 변화를 썼다.",
                answer: "태양;달", options: ["별;구름", "태양;달", "바람;강물", "계절;온도"],
                explanation: "과거에는 해시계처럼 태양의 위치 변화를 이용하거나, 달의 모양이 주기적으로 변하는 것을 기준으로 시간을 측정했습니다."
            },
            {
                id: 10, type: 'fill-in', text: "10. 조선 시대에는 (   )를 이용해 태양의 위치 변화에 따른 (   )의 길이로 (   )을 측정하였다.",
                answer: "앙부일구;그림자;시간", options: ["측우기;빗물;강수량", "자격루;물;시간", "앙부일구;그림자;시간", "혼천의;별;위치"],
                explanation: "앙부일구는 조선 시대의 대표적인 해시계로, 태양 빛에 의해 생기는 그림자의 위치와 길이를 이용하여 시간과 절기를 알 수 있었습니다."
            },
            {
                id: 11, type: 'fill-in', text: "11. 과거에는 손가락 마디, 발걸음의 폭 등으로 (   )를 측정하였다.",
                answer: "길이", options: ["무게", "시간", "길이", "온도"],
                explanation: "과거에는 표준화된 측정 도구가 없어 뼘, 자, 보폭 등 사람의 신체 일부나 주변의 자연물을 기준으로 길이를 어림하여 측정했습니다."
            },
            {
                id: 12, type: 'ox', text: "12. 현대에는 정밀하게 시간을 측정하기 위해 빛이 왕복한 시간을 이용한다.",
                answer: "X", options: ["O", "X"],
                explanation: "현대에 시간을 정밀하게 측정하는 표준은 '세슘 원자시계'입니다. 빛이 왕복한 시간을 이용하는 것은 '길이'를 정밀하게 정의하고 측정하는 방법입니다."
            },
            {
                id: 13, type: 'fill-in', text: "13. 현대에는 정밀하게 시간을 측정하기 위해 (   )를 이용한다.",
                answer: "세슘 원자시계", options: ["모래시계", "해시계", "GPS 수신기", "세슘 원자시계"],
                explanation: "세슘 원자시계는 세슘 원자가 특정 주파수의 전자기파를 흡수/방출하는 현상을 이용하여 매우 정확하게 시간을 측정하는 장치로, 시간 표준으로 사용됩니다."
            },
            {
                id: 14, type: 'fill-in', text: "14. 의학이나 반도체 같은 분야가 발전할 수 있던 까닭은 (   ) 규모를 측정하면서이다.",
                answer: "작은", options: ["큰", "일정한", "작은", "변화하는"],
                explanation: "의학(세포, 바이러스 연구 등)이나 반도체(미세 회로 제작) 분야는 매우 작은 규모의 세계를 정밀하게 측정하고 제어하는 기술이 발전하면서 함께 성장했습니다."
            },
            {
                id: 15, type: 'fill-in', text: "15. 항공 우주 분야가 발전할 수 있던 까닭은 (   ) 규모를 측정하면서이다.",
                answer: "큰", options: ["작은", "평균적인", "알 수 없는", "큰"],
                explanation: "항공 우주 분야는 지구의 크기, 행성 간의 거리, 우주의 광대함과 같이 매우 큰 규모를 정확하게 측정하고 이해하는 기술이 발전하면서 함께 성장했습니다."
            },
            {
                id: 16, type: 'fill-in', text: "16. 현대에는 빛이 왕복한 시간을 이용하여 (   )를 측정한다.",
                answer: "길이", options: ["시간", "질량", "길이", "온도"],
                explanation: "현대의 길이 표준(미터)은 빛이 진공에서 특정 시간 동안 진행한 거리로 정의됩니다. 따라서 빛이 왕복한 시간을 정확히 측정하면 거리를 매우 정밀하게 알 수 있습니다."
            },
            {
                id: 17, type: 'fill-in', text: "17. 빛의 속력을 3 × 10<sup>8</sup> m/s 이라 할 때 A부터 B까지 빛이 왕복하는데 걸린 시간이 4초라면 측정한 길이는? (   )m",
                answer: "6 × 10⁸", 
                options: ["12 × 10<sup>8</sup>", "3 × 10<sup>8</sup>", "6 × 10<sup>8</sup>", "1.5 × 10<sup>8</sup>"],
                explanation: "빛이 A에서 B까지 갔다가 다시 A로 돌아오는 데 4초 걸렸으므로, A에서 B까지 가는 데 걸린 시간(편도)은 2초입니다. 거리 = 속력 × 시간이므로, 길이는 (3 × 10<sup>8</sup> m/s) × 2s = 6 × 10<sup>8</sup> m 입니다."
            },
            {
                id: 18, type: 'ox', text: "18. 세슘 원자시계는 오랜 시간이 지나도 오차가 발생하지 않는다.",
                answer: "X", options: ["O", "X"],
                explanation: "세슘 원자시계는 현존하는 가장 정밀한 시계 중 하나이지만, 극히 미미하게나마 오차가 발생할 수 있습니다. 다만 그 오차가 수천만 년에서 수억 년에 1초 정도로 매우 작습니다."
            },
            {
                id: 19, type: 'fill-in', text: "19. 세슘 원자시계는 빛의 (   )를 이용하여 (   )을 측정한다.",
                answer: "진동수;시간", options: ["세기;거리", "진동수;시간", "색깔;온도", "파장;길이"],
                explanation: "세슘 원자시계는 세슘-133 원자가 특정 조건에서 방출하거나 흡수하는 전자기파(빛)의 고유한 진동수를 기준으로 시간을 매우 정확하게 측정합니다."
            },
            {
                id: 20, type: 'fill-in', text: "20. 태양의 위치 변화와 달의 모양 변화를 통해 측정할 수 있는 것은 (   )이다.",
                answer: "시간", options: ["길이", "시간", "무게", "부피"],
                explanation: "과거 사람들은 하루 동안 태양의 위치가 주기적으로 변하는 것(낮과 밤, 시각)과 한 달 동안 달의 모양이 주기적으로 변하는 것(음력 날짜)을 관찰하여 시간의 흐름을 파악했습니다."
            },
            {
                id: 21, type: 'fill-in', text: "21. 10<sup>1</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "데카;da", options: ["데시;d", "데카;da", "헥토;h", "킬로;k"],
                explanation: "10<sup>1</sup> (10배)을 나타내는 SI 접두어는 '데카(deca)'이고, 기호는 'da'입니다. 예: 1데카미터(dam) = 10미터."
            },
            {
                id: 22, type: 'fill-in', text: "22. 10<sup>2</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "헥토;h", options: ["킬로;k", "메가;M", "헥토;h", "데카;da"],
                explanation: "10<sup>2</sup> (100배)을 나타내는 SI 접두어는 '헥토(hecto)'이고, 기호는 'h'입니다. 예: 1헥토파스칼(hPa) = 100파스칼."
            },
            {
                id: 23, type: 'fill-in', text: "23. 10<sup>3</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "킬로;k", options: ["메가;M", "기가;G", "테라;T", "킬로;k"],
                explanation: "10<sup>3</sup> (1000배)을 나타내는 SI 접두어는 '킬로(kilo)'이고, 기호는 'k'입니다. 예: 1킬로그램(kg) = 1000그램."
            },
            {
                id: 24, type: 'fill-in', text: "24. 10<sup>6</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "메가;M", options: ["기가;G", "메가;M", "테라;T", "킬로;k"],
                explanation: "10<sup>6</sup> (백만 배)을 나타내는 SI 접두어는 '메가(mega)'이고, 기호는 'M'입니다. 예: 1메가와트(MW) = 10<sup>6</sup>와트."
            },
            {
                id: 25, type: 'fill-in', text: "25. 10<sup>9</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "기가;G", options: ["기가;G", "테라;T", "페타;P", "메가;M"],
                explanation: "10<sup>9</sup> (십억 배)을 나타내는 SI 접두어는 '기가(giga)'이고, 기호는 'G'입니다. 예: 1기가바이트(GB) = 10<sup>9</sup>바이트."
            },
            {
                id: 26, type: 'fill-in', text: "26. 10<sup>12</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "테라;T", options: ["페타;P", "엑사;E", "테라;T", "기가;G"],
                explanation: "10<sup>12</sup> (일조 배)을 나타내는 SI 접두어는 '테라(tera)'이고, 기호는 'T'입니다. 예: 1테라헤르츠(THz) = 10<sup>12</sup>헤르츠."
            },
            {
                id: 27, type: 'fill-in', text: "27. 200Mm는 (   ) km 이다.",
                answer: "200000", options: ["20000", "200", "200000", "0.2"],
                explanation: "M(메가)는 10<sup>6</sup>, k(킬로)는 10<sup>3</sup>을 의미합니다. 1Mm = 10<sup>6</sup>m이고, 1km = 10<sup>3</sup>m이므로, 1Mm = 1000km입니다. 따라서 200Mm = 200 × 1000km = 200000km입니다."
            },
            {
                id: 28, type: 'fill-in', text: "28. 200Mm는 (   ) Gm 이다.",
                answer: "0.2", options: ["2", "20", "2000", "0.2"],
                explanation: "M(메가)는 10<sup>6</sup>, G(기가)는 10<sup>9</sup>을 의미합니다. 1Gm = 10<sup>9</sup>m이고, 1Mm = 10<sup>6</sup>m이므로, 1Gm = 1000Mm입니다. 따라서 200Mm = 200/1000 Gm = 0.2Gm입니다."
            },
            {
                id: 29, type: 'fill-in', text: "29. 10<sup>-1</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "데시;d", options: ["센티;c", "밀리;m", "데시;d", "데카;da"],
                explanation: "10<sup>-1</sup> (1/10)을 나타내는 SI 접두어는 '데시(deci)'이고, 기호는 'd'입니다. 예: 1데시리터(dL) = 0.1리터."
            },
            {
                id: 30, type: 'fill-in', text: "30. 10<sup>-2</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "센티;c", options: ["밀리;m", "마이크로;μ", "센티;c", "데시;d"],
                explanation: "10<sup>-2</sup> (1/100)을 나타내는 SI 접두어는 '센티(centi)'이고, 기호는 'c'입니다. 예: 1센티미터(cm) = 0.01미터."
            },
            {
                id: 31, type: 'fill-in', text: "31. 10<sup>-3</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "밀리;m", options: ["마이크로;μ", "나노;n", "피코;p", "밀리;m"],
                explanation: "10<sup>-3</sup> (1/1000)을 나타내는 SI 접두어는 '밀리(milli)'이고, 기호는 'm'입니다. 예: 1밀리그램(mg) = 0.001그램."
            },
            {
                id: 32, type: 'fill-in', text: "32. 10<sup>-6</sup>의 접두어는 (   )로 기호는 (   )를 쓴다.",
                answer: "마이크로;μ", options: ["나노;n", "마이크로;μ", "피코;p", "밀리;m"],
                explanation: "10<sup>-6</sup> (백만분의 1)을 나타내는 SI 접두어는 '마이크로(micro)'이고, 기호는 'μ'입니다. 예: 1마이크로초(μs) = 10<sup>-6</sup>초."
            },
            {
                id: 33, type: 'ox', text: "33. 밀리와 마이크로의 접두어는 동일하다.",
                answer: "X", options: ["O", "X"],
                explanation: "밀리(m)는 10<sup>-3</sup>을, 마이크로(μ)는 10<sup>-6</sup>을 나타내므로 서로 다른 크기의 접두어입니다."
            },
            {
                id: 34, type: 'fill-in', text: "34. 10<sup>-9</sup>의 접두어는 (   )로 (   )를 쓴다.",
                answer: "나노;n", options: ["피코;p", "펨토;f", "나노;n", "마이크로;μ"],
                explanation: "10<sup>-9</sup> (십억분의 1)을 나타내는 SI 접두어는 '나노(nano)'이고, 기호는 'n'입니다. 예: 1나노미터(nm) = 10<sup>-9</sup>미터."
            },
            {
                id: 35, type: 'fill-in', text: "35. 10<sup>-12</sup>의 접두어는 (   )로 (   )를 쓴다.",
                answer: "피코;p", options: ["펨토;f", "아토;a", "피코;p", "나노;n"],
                explanation: "10<sup>-12</sup> (일조분의 1)을 나타내는 SI 접두어는 '피코(pico)'이고, 기호는 'p'입니다. 예: 1피코패럿(pF) = 10<sup>-12</sup>패럿."
            },
            {
                id: 36, type: 'fill-in', text: "36. 1nm는 1/(   )m 이다.", 
                answer: "10⁹", options: ["10⁶", "10⁹", "10¹²", "10³"], // 10<sup>9</sup> 대신 10⁹ 사용
                explanation: "나노(n)는 10<sup>-9</sup>를 의미하므로, 1nm = 10<sup>-9</sup>m = 1/10<sup>9</sup>m 입니다."
            },
            {
                id: 37, type: 'fill-in', text: "37. 1t는 (   )의 단위로 (   )kg과 같다.",
                answer: "질량;1000", options: ["무게;100", "부피;1000", "질량;1000", "길이;100"],
                explanation: "t(톤)은 질량의 단위로, 1t은 1000kg과 같습니다."
            },
            {
                id: 38, type: 'fill-in', text: "38. 기본량 7가지에는 (시간), (길이), (질량), (전류), (온도), (   ), (광도)가 있다.",
                answer: "물질량", options: ["부피", "속도", "힘", "물질량"],
                explanation: "국제단위계(SI)의 7가지 기본량은 시간, 길이, 질량, 전류, 열역학적 온도, 물질량, 광도입니다."
            },
            {
                id: 39, type: 'ox', text: "39. 기본량의 단위는 1가지 뿐이다.",
                answer: "X", options: ["O", "X"],
                explanation: "각 기본량은 국제단위계(SI)에서 정한 '기본 단위'를 가집니다 (예: 길이의 기본 단위는 미터). 하지만 필요에 따라 다양한 보조 단위나 유도 단위를 사용할 수 있습니다. '기본 단위'는 하나로 정의됩니다."
            },
            {
                id: 40, type: 'fill-in', text: "40. 길이의 기본 단위는 (   )이다.",
                answer: "m", options: ["cm", "km", "mm", "m"],
                explanation: "국제단위계(SI)에서 길이의 기본 단위는 미터(m)입니다."
            },
            {
                id: 41, type: 'ox', text: "41. 길이의 단위로 ft(피트)를 쓸 수 있다.",
                answer: "O", options: ["X", "O"],
                explanation: "ft(피트)는 길이를 나타내는 단위 중 하나로, SI 단위는 아니지만 특정 분야나 국가에서 사용됩니다."
            },
            {
                id: 42, type: 'fill-in', text: "42. 온도의 기본 단위는 (K)이지만 우리나라에서는 주로 (   )를 쓴다.",
                answer: "℃", options: ["℉", "K", "℃", "R"],
                explanation: "국제단위계(SI)에서 온도의 기본 단위는 켈빈(K)입니다. 하지만 일상생활에서 우리나라는 섭씨온도(℃)를 주로 사용합니다."
            },
            {
                id: 43, type: 'fill-in', text: "43. 기본량의 크기를 나타내거나 비교하기 위해 사용하는 것을 (   )라 한다.",
                answer: "단위", options: ["숫자", "기호", "단위", "법칙"],
                explanation: "단위는 물리량의 크기를 측정하고 표현하기 위한 기준으로, 특정 물리량의 정해진 양을 나타냅니다."
            },
            {
                id: 44, type: 'fill-in', text: "44. 기본량으로부터 유도된 물리량을 (   )이라 한다.",
                answer: "유도량", options: ["측정량", "유도량", "상대량", "절대량"],
                explanation: "유도량은 기본량들의 수학적 조합(곱셈, 나눗셈 등)으로 정의되는 물리량입니다. 예: 속력, 넓이, 밀도 등."
            },
            {
                id: 45, type: 'fill-in', text: "45. cm<sup>3</sup>, m<sup>3</sup>은 (   )의 단위이다.", // sup 태그 사용
                answer: "부피", options: ["넓이", "길이", "질량", "부피"],
                explanation: "cm<sup>3</sup>(세제곱센티미터)와 m<sup>3</sup>(세제곱미터)는 부피를 나타내는 단위입니다."
            },
            {
                id: 46, type: 'fill-in', text: "46. km/h는 (   )의 단위이다.",
                answer: "속력", options: ["가속도", "거리", "속력", "시간"],
                explanation: "km/h(킬로미터 매 시)는 단위 시간당 이동한 거리를 나타내는 속력의 단위입니다."
            },
            {
                id: 47, type: 'fill-in', text: "47. mAh, Ah는 (   )의 단위이다.",
                answer: "배터리 용량", options: ["전압", "전력", "저항", "배터리 용량"],
                explanation: "mAh(밀리암페어시)와 Ah(암페어시)는 전류와 시간의 곱으로, 주로 배터리가 저장할 수 있는 전하량 또는 배터리의 용량을 나타내는 단위입니다."
            },
            {
                id: 48, type: 'fill-in', text: "48. %는 (   )의 단위이다.",
                answer: "농도", options: ["비율", "확률", "농도", "백분율"],
                explanation: "%(퍼센트)는 전체에 대한 특정 성분의 양을 백분율로 나타내는 단위로, 용액의 농도 등을 표현할 때 사용됩니다."
            },
            {
                id: 49, type: 'ox', text: "49. 넓이는 기본량인 길이만으로 만들 수 있는 유도량이다.",
                answer: "O", options: ["O", "X"],
                explanation: "넓이는 (길이 × 길이)로 계산되므로, 기본량인 길이만으로 유도되는 유도량입니다."
            },
            {
                id: 50, type: 'ox', text: "50. 부피는 기본량인 길이만으로 만들 수 있는 유도량이다.",
                answer: "O", options: ["X", "O"],
                explanation: "부피는 (길이 × 길이 × 길이)로 계산되므로, 기본량인 길이만으로 유도되는 유도량입니다."
            },
            {
                id: 51, type: 'fill-in', text: "51. 속력은 기본량 중 (   )와 (   )의 조합으로 만들 수 있다.",
                answer: "길이;시간", options: ["질량;온도", "길이;시간", "전류;광도", "물질량;길이"],
                explanation: "속력은 단위 시간당 이동한 거리로 정의되므로, 기본량인 길이와 시간의 조합으로 만들어지는 유도량입니다 (속력 = 길이/시간)."
            },
            {
                id: 52, type: 'fill-in', text: "52. 가속도는 기본량 중 (   )와 (   )의 조합으로 만들 수 있다.",
                answer: "길이;시간", options: ["질량;힘", "에너지;시간", "길이;시간", "온도;길이"],
                explanation: "가속도는 단위 시간당 속도의 변화량으로 정의되며, 속도는 다시 길이와 시간의 조합입니다. 따라서 가속도는 (길이/시간)/시간 = 길이/시간<sup>2</sup> 으로, 기본량인 길이와 시간의 조합으로 만들어집니다."
            },
            {
                id: 53, type: 'fill-in', text: "53. 가속도의 단위는 (m/s<sup>2</sup>)이다.", 
                answer: "m/s²", options: ["m/s", "kg·m/s²", "N/m²", "m/s²"], 
                explanation: "가속도는 속도를 시간으로 나눈 값이므로, 속도의 단위(m/s)를 시간의 단위(s)로 나누어 m/s<sup>2</sup>(미터 매 초 제곱)이 됩니다."
            },
            {
                id: 54, type: 'fill-in', text: "54. 밀도는 기본량 중 (   )과 (   )의 조합으로 만들 수 있다.",
                answer: "질량;길이", options: ["시간;온도", "질량;길이", "힘;면적", "전류;시간"],
                explanation: "밀도는 단위 부피당 질량으로 정의됩니다 (밀도 = 질량/부피). 부피는 길이의 세제곱이므로, 밀도는 기본량인 질량과 길이의 조합으로 만들어집니다 (질량/길이<sup>3</sup>)."
            },
            {
                id: 55, type: 'fill-in', text: "55. 밀도의 단위는 (kg/m<sup>3</sup>)이다.", 
                answer: "kg/m³", options: ["g/cm³", "kg/L", "kg/m³", "모두 가능하나 SI는 kg/m³"], 
                explanation: "밀도의 SI 단위는 kg/m<sup>3</sup>(킬로그램 매 세제곱미터)입니다. g/cm<sup>3</sup>이나 kg/L도 사용되지만, SI 기본 단위를 사용한 표현입니다."
            },
            {
                id: 56, type: 'fill-in', text: "56. 농도의 단위는 (mol/m<sup>3</sup>) 또는 (   )를 쓴다.", 
                answer: "%", options: ["M", "ppm", "g/L", "%"],
                explanation: "농도를 나타내는 단위는 다양합니다. 몰 농도(mol/m<sup>3</sup> 또는 mol/L (M)), 퍼센트 농도(%), ppm 등이 사용됩니다. 문제의 맥락상 %가 적절합니다."
            },
            {
                id: 57, type: 'fill-in', text: "57. mol은 (   )의 단위이고, m<sup>3</sup>은 (   )의 단위이다.", 
                answer: "물질량;부피", options: ["질량;넓이", "개수;면적", "물질량;부피", "농도;길이"],
                explanation: "mol(몰)은 물질의 양을 나타내는 SI 기본 단위인 물질량의 단위입니다. m<sup>3</sup>(세제곱미터)는 부피의 SI 단위입니다."
            },
            {
                id: 58, type: 'ox', text: "58. 힘은 기본량이다.",
                answer: "X", options: ["O", "X"],
                explanation: "힘은 기본량이 아니라 유도량입니다. 힘(F)은 질량(m)과 가속도(a)의 곱으로 정의됩니다 (F=ma)."
            },
            {
                id: 59, type: 'fill-in', text: "59. 힘의 단위는 (N)이며 힘은 질량 × 가속도로 (kg·m/s<sup>2</sup>)이라는 단위를 써도 된다.", 
                answer: "N", options: ["J", "Pa", "N", "W"],
                explanation: "힘의 SI 단위는 뉴턴(N)입니다. 힘은 질량과 가속도의 곱이므로, 기본 단위로 표현하면 kg·m/s<sup>2</sup>이 되며, 1N = 1 kg·m/s<sup>2</sup> 입니다."
            },
            {
                id: 60, type: 'fill-in', text: "60. 압력의 단위는 (N/m<sup>2</sup>) = (kg/m·s<sup>2</sup>) = (   )를 모두 쓸 수 있다.", 
                answer: "Pa", options: ["atm", "mmHg", "bar", "Pa"],
                explanation: "압력은 단위 면적당 작용하는 힘으로 정의됩니다. SI 단위는 파스칼(Pa)이며, 1 Pa = 1 N/m<sup>2</sup> 입니다. 이를 기본 단위로 풀면 kg/(m·s<sup>2</sup>)이 됩니다."
            },
            {
                id: 61, type: 'fill-in', text: "61. 압력의 뜻은 단위 면적당 평균 (   )이다.",
                answer: "힘", options: ["질량", "에너지", "일", "힘"],
                explanation: "압력은 특정 면적에 수직으로 작용하는 평균적인 힘의 크기를 그 면적으로 나눈 값입니다 (압력 = 힘/면적)."
            },
            {
                id: 62, type: 'fill-in', text: "62. 10400mAh는 (   ) Ah 이다.",
                answer: "10.4", options: ["1.04", "104", "0.104", "10.4"],
                explanation: "m(밀리)는 10<sup>-3</sup>을 의미하므로, 1mAh = 0.001Ah 입니다. 따라서 10400mAh = 10400 × 0.001 Ah = 10.4Ah 입니다."
            },
            {
                id: 63, type: 'fill-in', text: "63. 자연 현상이나 우리 주변의 여러 현상을 설명하기 위해 필요한 기본적인 양을 (   )",
                answer: "기본량", options: ["유도량", "물리량", "기본량", "측정값"],
                explanation: "기본량은 다른 물리량으로 정의되지 않고 독립적으로 정의되는 물리량으로, 과학적 측정과 설명의 기초가 됩니다. SI 기본량에는 7가지가 있습니다."
            },
            {
                id: 64, type: 'ox', text: "64. 시간과 길이를 측정할 때는 규모와 관계 없이 동일한 방법을 사용해야한다.",
                answer: "X", options: ["O", "X"],
                explanation: "시간과 길이를 측정할 때는 대상의 규모에 따라 적절한 방법과 도구를 사용해야 합니다."
            },
            {
                id: 65, type: 'ox', text: "65. 속력은 기본량 중 길이의 개념만을 이용해 설명할 수 있다.",
                answer: "X", options: ["X", "O"],
                explanation: "속력은 단위 시간당 이동한 거리로, 기본량인 길이와 시간 두 가지 개념을 모두 이용하여 설명됩니다."
            },
            {
                id: 66, type: 'ox', text: "66. 같은 기본량을 서로 다른 단위로 나타내면 혼란을 일으킬 수 있다.",
                answer: "O", options: ["O", "X"],
                explanation: "같은 물리량이라도 서로 다른 단위를 사용하면 값의 비교가 어렵고 오해가 발생할 수 있어 혼란을 야기할 수 있습니다. 이 때문에 국제단위계(SI)가 중요합니다."
            },
            {
                id: 67, type: 'ox', text: "67. 시간과 길이를 측정하는 방법은 변하지 않는다.",
                answer: "X", options: ["X", "O"],
                explanation: "과학 기술이 발전함에 따라 시간과 길이를 측정하는 방법과 그 정밀도는 지속적으로 발전하고 변해왔습니다."
            },
            {
                id: 68, type: 'ox', text: "68. 파운드는 (질량)의 단위로 기본량의 기본 단위이다.",
                answer: "X", options: ["O", "X"],
                explanation: "파운드(lb)는 질량의 단위로 사용되지만, 국제단위계(SI)의 기본 단위는 아닙니다. SI에서 질량의 기본 단위는 킬로그램(kg)입니다."
            }
        ];

        // 명언 목록
        const motivationalQuotes = [
            "오늘의 노력이 내일의 너를 만든다.", "포기하지 않는 한, 실패는 없다.", "가장 큰 위험은 아무 위험도 감수하지 않는 것이다.",
            "배움은 의무도, 생존도 아니다. 그것은 우리의 가장 큰 특권이다.", "성공은 최종 목적지가 아니며, 실패는 치명적이지 않다. 중요한 것은 계속 나아가는 용기다.",
            "작은 성공들이 모여 큰 성공을 이룬다.", "어제보다 나은 오늘, 오늘보다 나은 내일을 만들자.",
            "가장 큰 영광은 한 번도 실패하지 않음이 아니라 실패할 때마다 다시 일어서는 데에 있다.", "천리길도 한 걸음부터.", "노력은 결코 배신하지 않는다."
        ];

        const quizElement = document.getElementById('quiz');
        const paginationControlsElement = document.getElementById('pagination-controls');
        const submitPageButton = document.getElementById('submit-page-btn');
        const scoreSectionElement = document.getElementById('score-section');
        const currentPageScoreTextElement = document.getElementById('current-page-score-text');
        const totalScoreTextElement = document.getElementById('total-score-text');
        const pageInfoElement = document.getElementById('page-info');
        const quizMainTitleDisplayElement = document.getElementById('quiz-main-title-in-score');
        const motivationalQuoteElement = document.getElementById('motivational-quote'); 
        
        const welcomePopup = document.getElementById('welcome-popup');
        const popupPasswordInput = document.getElementById('popup-password');
        const popupConfirmButton = document.getElementById('popup-confirm');
        const popupErrorMessage = document.getElementById('popup-error');

        const correctPassword = "0407"; 

        const questionsPerPage = 10; 
        let currentPage = 0;
        let pageScores = []; 
        let pageAttempted = []; 

        function initializeQuizData() {
            questions.forEach(q => {
                q.userAnswer = null;
                q.isCorrect = null;
                q.attemptedThisSession = false; 
                if (q.answer && q.answer.includes(';')) {
                    q.answersArray = q.answer.split(';');
                } else if (q.answer) {
                    q.answersArray = [q.answer];
                } else {
                    q.answersArray = [];
                }
            });
            const numPages = Math.ceil(questions.length / questionsPerPage);
            pageAttempted = new Array(numPages).fill(false);
            pageScores = new Array(numPages).fill(0);
        }


        function renderQuestionsForPage(page) {
            quizElement.innerHTML = ''; 
            currentPage = page;

            const start = page * questionsPerPage;
            const end = Math.min(start + questionsPerPage, questions.length);
            const questionsOnPage = questions.slice(start, end);

            pageInfoElement.textContent = `총 ${questions.length}문제 중 ${start + 1} - ${end}번 문제`;


            questionsOnPage.forEach((q, indexOnPage) => {
                const questionCard = document.createElement('div');
                questionCard.classList.add('question-card');
                questionCard.id = `question-${q.id}`;

                const questionText = document.createElement('p');
                questionText.classList.add('question-text');
                let questionHTML = q.text;
                if (q.answersArray && q.answersArray.length > 1) { 
                    let blankCount = 0;
                    questionHTML = q.text.replace(/(\(\s*(?:[^)]*)\s*\))/g, (match) => {
                        blankCount++;
                        return `<span class="blank-emphasis">( ${"&nbsp;&nbsp;&nbsp;".repeat(q.answersArray[blankCount-1] ? q.answersArray[blankCount-1].length/2 +1 : 3)} )</span>`;
                    });
                } else { 
                     questionHTML = q.text.replace(/(\(\s*(?:[^)]*)\s*\))/g, '<span class="blank-emphasis">( &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )</span>');
                }
                questionText.innerHTML = questionHTML; 
                questionCard.appendChild(questionText);

                const optionsContainer = document.createElement('div');
                optionsContainer.classList.add('options');

                q.options.forEach(option => {
                    const optionId = `q${String(q.id).replace(/[^a-zA-Z0-9]/g, '')}-option-${option.replace(/[^a-zA-Z0-9ㄱ-ㅎㅏ-ㅣ가-힣$]/g, '')}`;
                    
                    const radioInput = document.createElement('input');
                    radioInput.type = 'radio';
                    radioInput.id = optionId;
                    radioInput.name = `question-${q.id}`; 
                    radioInput.value = option; 
                    radioInput.classList.add('option-input', 'hidden');
                    if (q.userAnswer === option) radioInput.checked = true; 
                    if (pageAttempted[currentPage]) radioInput.disabled = true;

                    const optionLabel = document.createElement('label');
                    optionLabel.htmlFor = optionId;
                    optionLabel.innerHTML = option.includes(';') ? option.split(';').join(', ') : option; 
                    optionLabel.classList.add('option-label');
                    if (pageAttempted[currentPage]) optionLabel.classList.add('opacity-70', 'cursor-not-allowed');

                    optionsContainer.appendChild(radioInput);
                    optionsContainer.appendChild(optionLabel);
                });
                questionCard.appendChild(optionsContainer);

                const feedbackElement = document.createElement('div');
                feedbackElement.classList.add('feedback');
                feedbackElement.style.display = 'none'; 
                questionCard.appendChild(feedbackElement);
                
                if (pageAttempted[currentPage] && q.attemptedThisSession) {
                    showFeedbackForQuestion(q, questionCard);
                }
                quizElement.appendChild(questionCard);
            });
            
            // MathJax 렌더링은 HTML 태그로 변경했으므로 주석 처리 또는 삭제 가능
            // if (typeof MathJax !== "undefined") {
            //     MathJax.Hub.Queue(["Typeset", MathJax.Hub, quizElement]);
            // }

            const numPages = Math.ceil(questions.length / questionsPerPage);
            if (numPages > 1) {
                paginationControlsElement.style.display = 'flex';
                renderPaginationControls();
            } else {
                paginationControlsElement.style.display = 'none';
            }


            submitPageButton.disabled = pageAttempted[currentPage];
            if (pageAttempted[currentPage]) {
                submitPageButton.textContent = '채점 완료';
                scoreSectionElement.style.display = 'block'; 
                updateScoreDisplay(); 
                showMotivationalQuote(); 
            } else {
                submitPageButton.textContent = '이번 페이지 채점하기'; 
                motivationalQuoteElement.style.display = 'none'; 
                if (questionsOnPage.length > 0) { 
                     scoreSectionElement.style.display = 'none';
                } else { 
                     scoreSectionElement.style.display = 'block';
                     currentPageScoreTextElement.textContent = '이번 페이지에 문제가 없습니다.';
                     totalScoreTextElement.textContent = '';
                }
            }
        }
        
        function showFeedbackForQuestion(question, questionCard) {
            const feedbackElement = questionCard.querySelector('.feedback');
            if (!feedbackElement) return;

            feedbackElement.innerHTML = ''; 
            const correctAnswerText = question.answersArray.join(', ');

            if (question.isCorrect) {
                feedbackElement.innerHTML = '<strong class="font-semibold">정답입니다!</strong> 🎉';
                feedbackElement.className = 'feedback correct';
            } else {
                feedbackElement.innerHTML = `<strong class="font-semibold">오답입니다.</strong> 정답은 "<span class="font-bold text-red-700">${correctAnswerText}</span>"입니다.`;
                feedbackElement.className = 'feedback incorrect';
            }

            const explanationElement = document.createElement('p');
            explanationElement.classList.add('explanation');
            explanationElement.innerHTML = `<strong class="font-semibold">해설:</strong> ${question.explanation}`; 
            feedbackElement.appendChild(explanationElement);
            feedbackElement.style.display = 'block';
            
            // MathJax 렌더링은 HTML 태그로 변경했으므로 주석 처리 또는 삭제 가능
            // if (typeof MathJax !== "undefined") {
            //     MathJax.Hub.Queue(["Typeset", MathJax.Hub, feedbackElement]);
            // }
        }

        function renderPaginationControls() {
            paginationControlsElement.innerHTML = '';
            const numPages = Math.ceil(questions.length / questionsPerPage);

            const prevButton = document.createElement('button');
            prevButton.textContent = '이전';
            prevButton.disabled = currentPage === 0;
            prevButton.onclick = () => renderQuestionsForPage(currentPage - 1);
            paginationControlsElement.appendChild(prevButton);

            for (let i = 0; i < numPages; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i + 1;
                pageButton.classList.add('page-number');
                if (i === currentPage) {
                    pageButton.classList.add('current');
                }
                pageButton.onclick = () => renderQuestionsForPage(i);
                paginationControlsElement.appendChild(pageButton);
            }

            const nextButton = document.createElement('button');
            nextButton.textContent = '다음';
            nextButton.disabled = currentPage === numPages - 1;
            nextButton.onclick = () => renderQuestionsForPage(currentPage + 1);
            paginationControlsElement.appendChild(nextButton);
        }

        function showMotivationalQuote() {
            const randomIndex = Math.floor(Math.random() * motivationalQuotes.length);
            motivationalQuoteElement.textContent = motivationalQuotes[randomIndex];
            motivationalQuoteElement.style.display = 'block';
        }

        submitPageButton.addEventListener('click', () => {
            if (pageAttempted[currentPage]) return; 

            let scoreForThisPage = 0;
            
            const start = currentPage * questionsPerPage;
            const end = Math.min(start + questionsPerPage, questions.length);
            const questionsOnPage = questions.slice(start, end);

            questionsOnPage.forEach((q, indexOnPage) => {
                const questionCard = quizElement.children[indexOnPage]; 
                const selectedOptionInput = questionCard.querySelector(`input[name="question-${q.id}"]:checked`);
                
                q.attemptedThisSession = true;

                if (selectedOptionInput) {
                    q.userAnswer = selectedOptionInput.value; 
                    q.isCorrect = (q.userAnswer === q.answer); 
                                        
                    if (q.isCorrect) {
                        scoreForThisPage++; 
                    }
                    showFeedbackForQuestion(q, questionCard);

                    const radioInputs = questionCard.querySelectorAll('input[type="radio"]');
                    radioInputs.forEach(input => input.disabled = true);
                } else {
                    const feedbackElement = questionCard.querySelector('.feedback');
                    feedbackElement.textContent = '답을 선택하지 않았습니다.';
                    feedbackElement.className = 'feedback incorrect';
                    feedbackElement.style.display = 'block';
                    q.isCorrect = false; 
                }
            });
            
            pageScores[currentPage] = scoreForThisPage;
            pageAttempted[currentPage] = true;
            submitPageButton.disabled = true;
            submitPageButton.textContent = '채점 완료';
            
            scoreSectionElement.style.display = 'block';
            updateScoreDisplay();
            showMotivationalQuote(); 

            const quizContainerElement = document.querySelector('.quiz-container');
            if (quizContainerElement) {
                quizContainerElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });

        function updateScoreDisplay() {
            const questionsOnThisPageCount = Math.min(questionsPerPage, questions.length - (currentPage * questionsPerPage)); 
            currentPageScoreTextElement.textContent = `이번 페이지 점수: ${pageScores[currentPage]} / ${questionsOnThisPageCount}`;
            
            let currentTotalScore = 0;
            let currentTotalAttemptedQuestions = 0;
            for(let i=0; i < pageAttempted.length; i++){
                if(pageAttempted[i]){
                    const start = i * questionsPerPage;
                    const end = Math.min(start + questionsPerPage, questions.length);
                    currentTotalAttemptedQuestions += (end-start);
                    currentTotalScore += pageScores[i];
                }
            }

            const quizTitleElement = document.querySelector('h1'); 
            let quizMainTitle = "현재 단원";
            if (quizTitleElement) {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = quizTitleElement.innerHTML; 
                quizMainTitle = tempDiv.textContent || tempDiv.innerText || "";
                const titleParts = quizMainTitle.split('(');
                if (titleParts.length > 0) {
                    quizMainTitle = titleParts[0].trim();
                }
            }
            
            if (quizMainTitleDisplayElement) { 
                quizMainTitleDisplayElement.textContent = quizMainTitle;
            }

            if (currentTotalAttemptedQuestions > 0) {
                 totalScoreTextElement.style.display = 'block'; 
                 totalScoreTextElement.textContent = `총 누적 점수: ${currentTotalScore} / ${currentTotalAttemptedQuestions}`;
            } else {
                 totalScoreTextElement.style.display = 'none'; 
            }
        }
        
        // 팝업 기능
        window.onload = () => {
            if (welcomePopup) {
                // 각 퀴즈 페이지마다 고유한 sessionStorage 키 사용
                const popupSessionKey = 'appiaQuizPasswordEntered_science_basics_buldang'; 
                const popupShownThisSession = sessionStorage.getItem(popupSessionKey); 
                if (!popupShownThisSession) { 
                    welcomePopup.classList.add('show');
                } else {
                    initializeQuizData();
                    renderQuestionsForPage(0);
                }
            } else { 
                initializeQuizData();
                renderQuestionsForPage(0);
            }
        };

        if (popupConfirmButton) {
            popupConfirmButton.addEventListener('click', () => {
                if (popupPasswordInput.value === correctPassword) {
                    if (welcomePopup) {
                        welcomePopup.classList.remove('show');
                    }
                    const popupSessionKey = 'appiaQuizPasswordEntered_science_basics_buldang';
                    sessionStorage.setItem(popupSessionKey, 'true'); 
                    initializeQuizData(); 
                    renderQuestionsForPage(0);
                } else {
                    if (popupErrorMessage) {
                        popupErrorMessage.textContent = "비밀번호가 틀렸습니다. 다시 시도해주세요.";
                    }
                    popupPasswordInput.value = ''; 
                    popupPasswordInput.focus(); 
                }
            });
        }
        
        if (popupPasswordInput) {
            popupPasswordInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault(); 
                    popupConfirmButton.click();
                }
            });
        }

    </script>
</body>
</html>
